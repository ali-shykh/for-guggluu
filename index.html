<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>For My Guggluu ‚ù§Ô∏è</title>
    <!-- Cute Heart Favicon -->
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíñ</text></svg>"
    />

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Quicksand", sans-serif;
        overflow: hidden; /* Prevent scrolling */
        margin: 0;
        /* Galaxy/Starry Night Theme */
        background: radial-gradient(
          ellipse at bottom,
          #1b2735 0%,
          #090a0f 100%
        );
        height: 100vh;
        width: 100vw;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #fff;
      }

      #canvas-3d {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
      }

      .font-pacifico {
        font-family: "Pacifico", cursive;
      }

      /* The Playground Container - Reduced Size ~50% visual impact */
      #playground {
        position: relative;
        width: 90vw;
        max-width: 500px; /* Limits width on desktop to be card-like */
        height: 60vh; /* Fixed height for stability */
        min-height: 500px;
        background: rgba(20, 20, 30, 0.4); /* Darker glass for galaxy theme */
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 30px;
        box-shadow:
          0 0 40px rgba(220, 20, 60, 0.2),
          inset 0 0 20px rgba(255, 255, 255, 0.05);
        display: flex;
        flex-direction: column;
        align-items: center;
        /* Align to top to keep text position stable */
        justify-content: flex-start;
        overflow: hidden;
        padding-top: 60px; /* Fixed padding from top */
      }

      /* Content Wrapper */
      .content-wrapper {
        text-align: center;
        z-index: 10;
        width: 100%;
        transition: opacity 0.5s ease;
        /* Ensure it takes up space */
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      #no-btn {
        position: relative;
        transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
        white-space: nowrap;
      }

      .hidden {
        display: none !important;
      }

      /* Images */
      .story-image {
        opacity: 0;
        transform: scale(0.8);
        transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        max-height: 250px; /* Adjusted for smaller card */
        width: auto;
        border-radius: 15px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        border: 3px solid rgba(255, 215, 0, 0.3); /* Gold border */
      }

      .story-image.active {
        opacity: 1;
        transform: scale(1);
      }

      .pulse-btn {
        animation: pulse-glow 2s infinite;
      }

      @keyframes pulse-glow {
        0% {
          box-shadow: 0 0 0 0 rgba(229, 62, 62, 0.7);
        }
        70% {
          box-shadow: 0 0 0 15px rgba(229, 62, 62, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(229, 62, 62, 0);
        }
      }

      /* Text Colors for Galaxy Theme */
      .text-galaxy-gold {
        color: #ffe4e1; /* Misty Rose */
        text-shadow: 0 0 10px rgba(255, 105, 180, 0.5);
      }
      .text-galaxy-light {
        color: #fff0f5; /* Lavender Blush */
      }
    </style>
  </head>
  <body>
    <!-- 3D Background Canvas -->
    <canvas id="canvas-3d"></canvas>

    <!-- The Card/Playground -->
    <div id="playground">
      <!-- Main Question Section -->
      <div id="question-content" class="content-wrapper px-4">
        <h1 class="font-pacifico text-5xl text-galaxy-gold mb-6 drop-shadow-md">
          Guggluu... ‚ù§Ô∏è
        </h1>
        <p class="text-3xl text-galaxy-light font-bold mb-12 drop-shadow-sm">
          Will you be my Valentine?
        </p>

        <div
          class="flex justify-center items-center gap-6 w-full h-20 relative"
        >
          <!-- Yes Button (Galaxy Theme) -->
          <button
            id="yes-btn"
            class="pulse-btn bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white font-bold py-3 px-8 rounded-full text-xl shadow-lg transform transition hover:scale-110 z-20 border border-white/20"
          >
            YES! ü•π
          </button>

          <!-- No Button -->
          <button
            id="no-btn"
            class="bg-gray-700/50 text-gray-300 hover:bg-gray-700 font-bold py-3 px-8 rounded-full text-xl shadow-lg cursor-pointer z-20 border border-white/10 backdrop-blur-sm"
          >
            NO! üòû
          </button>
        </div>
      </div>

      <!-- Celebration Section -->
      <div id="celebration-content" class="hidden content-wrapper px-4 h-full">
        <!-- Text matches H1 size/margin of previous screen for stability -->
        <h1 class="font-pacifico text-5xl text-galaxy-gold mb-6 animate-bounce">
          YAYYYYYYYY! üéâ
        </h1>
        
        <div
          class="relative w-full flex-1 flex flex-col items-center justify-start mt-4"
        >
          <!-- Sequence Container -->
          <div
            id="image-sequence"
            class="relative flex justify-center items-center h-[260px] w-full"
          >
            <!-- 
                        Using Google Drive "export=view" format for direct image loading. 
                        Note: Google Drive hosting can sometimes be rate-limited.
                    -->

            <!-- Image 1: Dancing GIF -->
            <img
              id="img-1"
              src="dancing.gif"
              class="story-image absolute"
              alt="Dancing Bubu"
              referrerpolicy="no-referrer"
            />

            <!-- Image 2: Kissing GIF -->
            <img
              id="img-2"
              src="kissing.gif"
              class="story-image absolute"
              alt="Kissing"
              referrerpolicy="no-referrer"
            />

            <!-- Image 3: Flowers Image -->
            <img
              id="img-3"
              src="flowers.gif"
              class="story-image absolute"
              alt="Flowers"
              referrerpolicy="no-referrer"
            />
          </div>

          <p
            id="caption-text"
            class="mt-6 text-2xl font-bold text-galaxy-light font-pacifico drop-shadow-md min-h-[1.5em] transition-all duration-300"
          >
            Let's Dance! üíÉ
          </p>
        </div>
      </div>
    </div>

    <!-- Three.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
      // --- 1. THE IMPOSSIBLE NO BUTTON LOGIC ---
      const noBtn = document.getElementById("no-btn");
      const playground = document.getElementById("playground");

      const moveButton = () => {
        // Logic to move button randomly within playground
        const maxX = playground.clientWidth - noBtn.offsetWidth - 20;
        const maxY = playground.clientHeight - noBtn.offsetHeight - 20;

        const randomX = Math.random() * maxX;
        const randomY = Math.random() * maxY;

        noBtn.style.position = "absolute";
        noBtn.style.left = Math.max(10, randomX) + "px";
        noBtn.style.top = Math.max(10, randomY) + "px";
      };

      noBtn.addEventListener("mouseover", moveButton);
      noBtn.addEventListener("touchstart", (e) => {
        e.preventDefault();
        moveButton();
      });
      noBtn.addEventListener("click", (e) => {
        e.preventDefault();
        moveButton();
      });

      // --- 2. THE CELEBRATION LOGIC ---
      const yesBtn = document.getElementById("yes-btn");
      const questionContent = document.getElementById("question-content");
      const celebrationContent = document.getElementById("celebration-content");

      const img1 = document.getElementById("img-1");
      const img2 = document.getElementById("img-2");
      const img3 = document.getElementById("img-3");
      const captionText = document.getElementById("caption-text");

      function shootConfetti() {
        const duration = 3000;
        const animationEnd = Date.now() + duration;
        const defaults = {
          startVelocity: 30,
          spread: 360,
          ticks: 60,
          zIndex: 100,
        };

        const interval = setInterval(function () {
          const timeLeft = animationEnd - Date.now();
          if (timeLeft <= 0) return clearInterval(interval);
          const particleCount = 50 * (timeLeft / duration);
          confetti(
            Object.assign({}, defaults, {
              particleCount,
              origin: { x: Math.random() * 0.2 + 0.1, y: Math.random() - 0.2 },
            }),
          );
          confetti(
            Object.assign({}, defaults, {
              particleCount,
              origin: { x: Math.random() * 0.2 + 0.7, y: Math.random() - 0.2 },
            }),
          );
        }, 250);

        // Heart & Rose Colors
        confetti({
          particleCount: 150,
          spread: 100,
          origin: { y: 0.6 },
          shapes: ["heart"],
          colors: ["#e53e3e", "#ff69b4", "#ffd700"], // Red, Pink, Gold
        });
      }

      yesBtn.addEventListener("click", () => {
        questionContent.style.display = "none"; // Instant switch for better alignment
        celebrationContent.classList.remove("hidden");
        celebrationContent.style.display = "flex";

        shootConfetti();
        playSequence();
      });

      function playSequence() {
        // Sequence Timing
        img1.classList.add("active");
        captionText.innerText = "I knew itttttttt! üíÉ";

        setTimeout(() => {
          img1.classList.remove("active");
          img2.classList.add("active");
          captionText.innerText = "Sending you a million kisses! üòò";
          shootConfetti();
        }, 3500);

        setTimeout(() => {
          img2.classList.remove("active");
          img3.classList.add("active");
          captionText.innerText = "Happy Valentine's Day, Guggluu! üåπ";
          shootConfetti();
        }, 7000);
      }

      // --- 3. GALAXY & STARS BACKGROUND ---
      function init3D() {
        const canvas = document.getElementById("canvas-3d");
        const scene = new THREE.Scene();
        // Add a little fog for depth
        scene.fog = new THREE.FogExp2(0x000000, 0.02);

        const camera = new THREE.PerspectiveCamera(
          75,
          window.innerWidth / window.innerHeight,
          0.1,
          1000,
        );
        const renderer = new THREE.WebGLRenderer({
          canvas: canvas,
          alpha: true,
          antialias: true,
        });

        renderer.setSize(window.innerWidth, window.innerHeight);
        camera.position.z = 5;

        // --- 3.1 STARS (Galaxy) ---
        const starsGeometry = new THREE.BufferGeometry();
        const starsCount = 2000;
        const starsPos = new Float32Array(starsCount * 3);

        for (let i = 0; i < starsCount * 3; i++) {
          starsPos[i] = (Math.random() - 0.5) * 20; // Spread out
        }

        starsGeometry.setAttribute(
          "position",
          new THREE.BufferAttribute(starsPos, 3),
        );
        const starsMaterial = new THREE.PointsMaterial({
          size: 0.02,
          color: 0xffffff,
          transparent: true,
          opacity: 0.8,
        });
        const starField = new THREE.Points(starsGeometry, starsMaterial);
        scene.add(starField);

        // --- 3.2 GLOWING HEARTS & ROSES (Abstract) ---
        // Creating a Heart Shape
        const x = 0,
          y = 0;
        const heartShape = new THREE.Shape();
        heartShape.moveTo(x + 0.5, y + 0.5);
        heartShape.bezierCurveTo(x + 0.5, y + 0.5, x + 0.4, y, x, y);
        heartShape.bezierCurveTo(
          x - 0.6,
          y,
          x - 0.6,
          y + 0.7,
          x - 0.6,
          y + 0.7,
        );
        heartShape.bezierCurveTo(
          x - 0.6,
          y + 1.1,
          x - 0.3,
          y + 1.54,
          x + 0.5,
          y + 1.9,
        );
        heartShape.bezierCurveTo(
          x + 1.2,
          y + 1.54,
          x + 1.6,
          y + 1.1,
          x + 1.6,
          y + 0.7,
        );
        heartShape.bezierCurveTo(x + 1.6, y + 0.7, x + 1.6, y, x + 1, y);
        heartShape.bezierCurveTo(
          x + 0.7,
          y,
          x + 0.5,
          y + 0.5,
          x + 0.5,
          y + 0.5,
        );

        const geometry = new THREE.ExtrudeGeometry(heartShape, {
          depth: 0.1,
          bevelEnabled: true,
          bevelSegments: 2,
          steps: 1,
          bevelSize: 0.05,
          bevelThickness: 0.05,
        });

        const objects = [];
        const colors = [0xff0055, 0xff1493, 0xff4500]; // Deep Red, Deep Pink, OrangeRed

        for (let i = 0; i < 30; i++) {
          const material = new THREE.MeshPhongMaterial({
            color: colors[Math.floor(Math.random() * colors.length)],
            shininess: 100,
            emissive: 0x441111, // Gives a slight glow
            specular: 0xffffff,
          });
          const mesh = new THREE.Mesh(geometry, material);

          // Position randomly in 3D space
          mesh.position.x = (Math.random() - 0.5) * 15;
          mesh.position.y = (Math.random() - 0.5) * 15;
          mesh.position.z = (Math.random() - 0.5) * 10;

          mesh.rotation.x = Math.random() * Math.PI;
          mesh.rotation.y = Math.random() * Math.PI;

          const scale = Math.random() * 0.15 + 0.05;
          mesh.scale.set(scale, scale, scale);

          scene.add(mesh);
          objects.push({
            mesh: mesh,
            speedY: Math.random() * 0.005 + 0.002,
            rotX: Math.random() * 0.01,
            rotY: Math.random() * 0.01,
          });
        }

        // --- LIGHTING for Glow ---
        const ambientLight = new THREE.AmbientLight(0x404040, 1); // Soft white light
        scene.add(ambientLight);

        const pointLight1 = new THREE.PointLight(0xff0000, 2, 50);
        pointLight1.position.set(5, 5, 5);
        scene.add(pointLight1);

        const pointLight2 = new THREE.PointLight(0x0000ff, 1, 50);
        pointLight2.position.set(-5, -5, 5);
        scene.add(pointLight2);

        // --- ANIMATION ---
        function animate() {
          requestAnimationFrame(animate);

          // Rotate Starfield slowly
          starField.rotation.y += 0.0005;
          starField.rotation.x += 0.0002;

          // Animate Hearts/Roses
          objects.forEach((obj) => {
            obj.mesh.position.y += obj.speedY;
            obj.mesh.rotation.x += obj.rotX;
            obj.mesh.rotation.y += obj.rotY;

            // Loop them back to bottom
            if (obj.mesh.position.y > 8) {
              obj.mesh.position.y = -8;
              obj.mesh.position.x = (Math.random() - 0.5) * 15;
            }
          });

          renderer.render(scene, camera);
        }
        animate();

        window.addEventListener("resize", () => {
          camera.aspect = window.innerWidth / window.innerHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(window.innerWidth, window.innerHeight);
        });
      }

      init3D();
    </script>
  </body>
</html>



