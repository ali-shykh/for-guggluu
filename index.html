<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>For My Guggluu ‚ù§Ô∏è</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíñ</text></svg>"
    />

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Quicksand", sans-serif;
        overflow: hidden;
        margin: 0;
        background: radial-gradient(
          ellipse at bottom,
          #1b2735 0%,
          #090a0f 100%
        );
        height: 100vh;
        width: 100vw;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #fff;
      }

      #canvas-3d {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
      }

      .font-pacifico {
        font-family: "Pacifico", cursive;
      }

      /* Wider Container: 90% */
      #playground {
        position: relative;
        width: 90vw;
        max-width: 1200px;
        height: 75vh;
        min-height: 550px;
        background: rgba(20, 20, 30, 0.4);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 40px;
        box-shadow:
          0 0 40px rgba(220, 20, 60, 0.2),
          inset 0 0 20px rgba(255, 255, 255, 0.05);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        overflow: hidden;
        padding: 60px 20px;
      }

      .content-wrapper {
        text-align: center;
        z-index: 10;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      /* Initially standard buttons, transition to absolute on interaction */
      #no-btn {
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        white-space: nowrap;
        z-index: 50;
      }

      .hidden {
        display: none !important;
      }

      .story-image {
        opacity: 0;
        transform: scale(0.8);
        transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        max-height: 300px;
        width: auto;
        border-radius: 20px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        border: 3px solid rgba(255, 215, 0, 0.3);
      }

      .story-image.active {
        opacity: 1;
        transform: scale(1);
      }

      .pulse-btn {
        animation: pulse-glow 2s infinite;
      }

      @keyframes pulse-glow {
        0% {
          box-shadow: 0 0 0 0 rgba(229, 62, 62, 0.7);
        }
        70% {
          box-shadow: 0 0 0 20px rgba(229, 62, 62, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(229, 62, 62, 0);
        }
      }

      .text-galaxy-gold {
        color: #ffe4e1;
        text-shadow: 0 0 15px rgba(255, 105, 180, 0.6);
      }
    </style>
  </head>
  <body>
    <canvas id="canvas-3d"></canvas>

    <div id="playground">
      <!-- Question Section -->
      <div id="question-content" class="content-wrapper">
        <h1
          class="font-pacifico text-5xl md:text-7xl text-galaxy-gold mb-8 drop-shadow-md"
        >
          Guggluu... ‚ù§Ô∏è
        </h1>
        <p
          class="text-2xl md:text-4xl text-white font-bold mb-12 drop-shadow-sm"
        >
          Will you be my Valentine?
        </p>

        <!-- Buttons start in a flex row for visibility -->
        <div
          id="button-container"
          class="flex flex-row justify-center items-center gap-8 w-full mt-10"
        >
          <button
            id="yes-btn"
            class="pulse-btn bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white font-bold py-4 px-12 rounded-full text-2xl shadow-lg transform transition hover:scale-110 z-30 border border-white/20"
          >
            YES! ü•π
          </button>

          <button
            id="no-btn"
            class="bg-gray-700/80 text-gray-300 hover:bg-gray-700 font-bold py-4 px-12 rounded-full text-2xl shadow-lg cursor-pointer border border-white/10 backdrop-blur-sm"
          >
            NO! üòû
          </button>
        </div>
      </div>

      <!-- Celebration Section -->
      <div id="celebration-content" class="hidden content-wrapper">
        <h1
          class="font-pacifico text-5xl md:text-7xl text-galaxy-gold mb-6 animate-bounce"
        >
          YAYYYYYYYYY! üéâ
        </h1>

        <div
          class="relative w-full flex-1 flex flex-col items-center justify-center"
        >
          <div
            id="image-sequence"
            class="relative flex justify-center items-center h-[300px] w-full"
          >
            <!-- Placeholder IDs for images - you can swap the src back to your local files -->
            <img
              id="img-1"
              src="dancing.gif"
              class="story-image absolute"
              alt="Dancing Bubu"
            />
            <img
              id="img-2"
              src="kissing.gif"
              class="story-image absolute"
              alt="Kissing"
            />
            <img
              id="img-3"
              src="flowers.gif"
              class="story-image absolute"
              alt="Flowers"
            />
          </div>
          <p
            id="caption-text"
            class="mt-8 text-3xl font-bold text-white font-pacifico drop-shadow-md transition-all duration-300"
          >
            I love you! üíñ
          </p>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
      const noBtn = document.getElementById("no-btn");
      const playground = document.getElementById("playground");
      const yesBtn = document.getElementById("yes-btn");
      const questionContent = document.getElementById("question-content");
      const celebrationContent = document.getElementById("celebration-content");

      // --- NO BUTTON LOGIC ---
      let hasMoved = false;

      const moveButton = () => {
        // Once interacted with, switch to absolute positioning
        if (!hasMoved) {
          noBtn.style.position = "absolute";
          hasMoved = true;
        }

        // Define boundaries (stay inside playground)
        const padding = 20;
        const maxX = playground.clientWidth - noBtn.offsetWidth - padding;
        const maxY = playground.clientHeight - noBtn.offsetHeight - padding;

        // Random coordinates within playground
        let randomX = Math.random() * maxX;
        let randomY = Math.random() * maxY;

        // Constrain
        randomX = Math.max(padding, randomX);
        randomY = Math.max(padding, randomY);

        noBtn.style.left = `${randomX}px`;
        noBtn.style.top = `${randomY}px`;
      };

      noBtn.addEventListener("mouseover", moveButton);
      noBtn.addEventListener("touchstart", (e) => {
        e.preventDefault();
        moveButton();
      });
      noBtn.addEventListener("click", (e) => {
        e.preventDefault();
        moveButton();
      });

      // --- CELEBRATION ---
      function shootConfetti() {
        confetti({
          particleCount: 150,
          spread: 70,
          origin: { y: 0.6 },
          colors: ["#ff0000", "#ff69b4", "#ffd700"],
        });
      }

      yesBtn.addEventListener("click", () => {
        questionContent.classList.add("hidden");
        celebrationContent.classList.remove("hidden");
        celebrationContent.style.display = "flex";
        shootConfetti();

        // Image Sequence
        const imgs = [
          document.getElementById("img-1"),
          document.getElementById("img-2"),
          document.getElementById("img-3"),
        ];
        const captions = [
          "I knew itttttttt! üíÉ",
          "A million kisses for you! üòò",
          "Happy Valentine's Day! üåπ",
        ];
        const captionEl = document.getElementById("caption-text");

        let current = 0;
        const cycle = () => {
          imgs.forEach((i) => i.classList.remove("active"));
          imgs[current].classList.add("active");
          captionEl.innerText = captions[current];
          shootConfetti();
          current = (current + 1) % imgs.length;
          setTimeout(cycle, 3500);
        };
        cycle();
      });

      // --- GALAXY BACKGROUND ---
      function init3D() {
        const canvas = document.getElementById("canvas-3d");
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(
          75,
          window.innerWidth / window.innerHeight,
          0.1,
          1000,
        );
        const renderer = new THREE.WebGLRenderer({
          canvas: canvas,
          alpha: true,
          antialias: true,
        });
        renderer.setSize(window.innerWidth, window.innerHeight);
        camera.position.z = 5;

        const starsGeom = new THREE.BufferGeometry();
        const starsCount = 2000;
        const starsPos = new Float32Array(starsCount * 3);
        for (let i = 0; i < starsCount * 3; i++)
          starsPos[i] = (Math.random() - 0.5) * 20;
        starsGeom.setAttribute(
          "position",
          new THREE.BufferAttribute(starsPos, 3),
        );
        const starField = new THREE.Points(
          starsGeom,
          new THREE.PointsMaterial({ size: 0.02, color: 0xffffff }),
        );
        scene.add(starField);

        scene.add(new THREE.AmbientLight(0xffffff, 0.8));

        function animate() {
          requestAnimationFrame(animate);
          starField.rotation.y += 0.001;
          renderer.render(scene, camera);
        }
        animate();
        window.addEventListener("resize", () => {
          camera.aspect = window.innerWidth / window.innerHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(window.innerWidth, window.innerHeight);
        });
      }
      init3D();
    </script>
  </body>
</html>
